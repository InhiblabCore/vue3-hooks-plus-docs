import{x as I,z as V,M as l}from"./plugin-vue_export-helper.cdf78444.js";import{i as n}from"./isBrowser.2609af58.js";function m(f){return typeof f=="function"}function w(f){function z(a,e){let t;try{t=f()}catch(r){console.error(r)}const d=r=>e!=null&&e.serializer?e==null?void 0:e.serializer(r):JSON.stringify(r),v=r=>e!=null&&e.deserializer?e==null?void 0:e.deserializer(r):JSON.parse(r);function S(){try{const r=t==null?void 0:t.getItem(l(a)?a.value:a);if(r)return v(r)}catch(r){console.error(r)}return m(e==null?void 0:e.defaultValue)?e==null?void 0:e.defaultValue():e==null?void 0:e.defaultValue}const u=I(S());return V(()=>{a&&(u.value=S())}),[u,r=>{if(typeof r=="undefined")u.value=void 0,t==null||t.removeItem(l(a)?a.value:a);else if(m(r)){const c=r(u.value);try{u.value=c,t==null||t.setItem(l(a)?a.value:a,d(c))}catch(h){console.error(h)}}else try{u.value=r,t==null||t.setItem(l(a)?a.value:a,d(r))}catch(c){console.error(c)}}]}return z}const N=w(()=>n?localStorage:void 0);export{N as u};
